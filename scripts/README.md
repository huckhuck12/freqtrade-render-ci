# è„šæœ¬ä½¿ç”¨è¯´æ˜

æœ¬ç›®å½•åŒ…å«äº†ç”¨äºæµ‹è¯•å’Œå›æµ‹8PMé«˜ä½ç‚¹ç­–ç•¥çš„å„ç§è„šæœ¬ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ local/                          # æœ¬åœ°è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ test_strategy.py            # ç‹¬ç«‹ç­–ç•¥æµ‹è¯•ï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ run_local_backtest.sh       # æœ¬åœ°å¿«é€Ÿå›æµ‹
â”‚   â””â”€â”€ run_freqtrade_backtest.sh   # å®Œæ•´Freqtradeå›æµ‹
â”œâ”€â”€ ci/                             # CI/CDè„šæœ¬
â”‚   â”œâ”€â”€ prepare_backtest.sh         # GitHub Actionså‡†å¤‡è„šæœ¬
â”‚   â””â”€â”€ analyze_results.sh          # ç»“æœåˆ†æè„šæœ¬
â””â”€â”€ README.md                       # æœ¬æ–‡ä»¶
```

## ğŸš€ æœ¬åœ°è„šæœ¬ä½¿ç”¨

### 1. ç‹¬ç«‹ç­–ç•¥æµ‹è¯• (æ¨èæ–°æ‰‹)

**ç‰¹ç‚¹**: ä¸éœ€è¦freqtradeç¯å¢ƒï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¿«é€ŸéªŒè¯ç­–ç•¥é€»è¾‘

```bash
# å®‰è£…ä¾èµ–
pip install pandas numpy matplotlib

# è¿è¡Œæµ‹è¯•
python scripts/local/test_strategy.py
```

**ä¼˜åŠ¿**:
- âœ… æ— éœ€å¤æ‚ç¯å¢ƒé…ç½®
- âœ… å¿«é€ŸéªŒè¯ç­–ç•¥é€»è¾‘
- âœ… å¯è‡ªç”±ä¿®æ”¹å‚æ•°
- âœ… è¯¦ç»†çš„äº¤æ˜“è®°å½•

### 2. æœ¬åœ°å¿«é€Ÿå›æµ‹

**ç‰¹ç‚¹**: éœ€è¦freqtradeç¯å¢ƒï¼Œä½¿ç”¨çœŸå®æ•°æ®ï¼Œå¿«é€Ÿå›æµ‹

```bash
# ç¡®ä¿å·²å®‰è£…freqtrade
pip install freqtrade

# ä½¿ç”¨é»˜è®¤å‚æ•°
./scripts/local/run_local_backtest.sh

# è‡ªå®šä¹‰å‚æ•°
./scripts/local/run_local_backtest.sh [æ—¶é—´èŒƒå›´] [äº¤æ˜“å¯¹] [æ•°æ®å¤©æ•°]
```

**å‚æ•°è¯´æ˜**:
- `æ—¶é—´èŒƒå›´`: æ ¼å¼ä¸ºYYYYMMDD-YYYYMMDDï¼Œå¦‚20240101-20241231
- `äº¤æ˜“å¯¹`: ç©ºæ ¼åˆ†éš”çš„äº¤æ˜“å¯¹ï¼Œå¦‚"ETH/USDT BTC/USDT"
- `æ•°æ®å¤©æ•°`: ä¸‹è½½çš„å†å²æ•°æ®å¤©æ•°ï¼Œå¦‚180

**ç¤ºä¾‹**:
```bash
# å›æµ‹2024å¹´å…¨å¹´ï¼Œä½¿ç”¨ETHå’ŒBTCï¼Œä¸‹è½½365å¤©æ•°æ®
./scripts/local/run_local_backtest.sh 20240101-20241231 "ETH/USDT BTC/USDT" 365

# å›æµ‹æœ€è¿‘6ä¸ªæœˆï¼Œä»…ä½¿ç”¨ETH
./scripts/local/run_local_backtest.sh 20240701-20241231 "ETH/USDT" 180
```

### 3. å®Œæ•´Freqtradeå›æµ‹

**ç‰¹ç‚¹**: å®Œæ•´çš„freqtradeå›æµ‹æµç¨‹ï¼ŒåŒ…å«è¯¦ç»†é…ç½®

```bash
./scripts/local/run_freqtrade_backtest.sh
```

## ğŸ¤– CI/CDè„šæœ¬

è¿™äº›è„šæœ¬ç”¨äºGitHub Actionsè‡ªåŠ¨åŒ–å›æµ‹ï¼Œé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œã€‚

### prepare_backtest.sh
- æ£€æŸ¥CIç¯å¢ƒ
- éªŒè¯é…ç½®æ–‡ä»¶
- åˆ›å»ºå¿…è¦ç›®å½•

### analyze_results.sh
- è§£æå›æµ‹ç»“æœ
- æå–å…³é”®æŒ‡æ ‡
- ç”Ÿæˆæ€§èƒ½è¯„ä¼°

## ğŸ“Š ç»“æœè§£è¯»

### å…³é”®æŒ‡æ ‡è¯´æ˜

| æŒ‡æ ‡ | è¯´æ˜ | ç†æƒ³å€¼ |
|------|------|--------|
| æ€»æ”¶ç›Šç‡ | æ•´ä¸ªå›æµ‹æœŸé—´çš„æ€»æ”¶ç›Š | > 0% |
| èƒœç‡ | ç›ˆåˆ©äº¤æ˜“å æ€»äº¤æ˜“çš„æ¯”ä¾‹ | > 50% |
| ç›ˆåˆ©å› å­ | æ€»ç›ˆåˆ©/æ€»äºæŸ | > 1.5 |
| æœ€å¤§å›æ’¤ | æœ€å¤§çš„èµ„é‡‘å›æ’¤å¹…åº¦ | < 20% |
| å¤æ™®æ¯”ç‡ | é£é™©è°ƒæ•´åæ”¶ç›Š | > 1.0 |

### æ€§èƒ½è¯„ä¼°æ ‡å‡†

**ä¼˜ç§€è¡¨ç°**:
- èƒœç‡ â‰¥ 55%
- ç›ˆåˆ©å› å­ â‰¥ 1.5
- æœ€å¤§å›æ’¤ â‰¤ 15%

**ä¸€èˆ¬è¡¨ç°**:
- èƒœç‡ 45-55%
- ç›ˆåˆ©å› å­ 1.0-1.5
- æœ€å¤§å›æ’¤ 15-25%

**éœ€è¦ä¼˜åŒ–**:
- èƒœç‡ < 45%
- ç›ˆåˆ©å› å­ < 1.0
- æœ€å¤§å›æ’¤ > 25%

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **freqtradeæœªå®‰è£…**
   ```bash
   pip install freqtrade
   ```

2. **æƒé™é—®é¢˜**
   ```bash
   chmod +x scripts/local/*.sh
   ```

3. **æ•°æ®ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤äº¤æ˜“å¯¹åç§°æ­£ç¡®
   - å°è¯•å‡å°‘æ•°æ®å¤©æ•°

4. **jqå·¥å…·æœªå®‰è£…**
   ```bash
   # Ubuntu/Debian
   sudo apt-get install jq
   
   # macOS
   brew install jq
   
   # Windows (ä½¿ç”¨WSLæˆ–Git Bash)
   # ä¸‹è½½jq.exeå¹¶æ·»åŠ åˆ°PATH
   ```

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   ```bash
   # åœ¨freqtradeå‘½ä»¤åæ·»åŠ  --verbosity 3
   freqtrade backtesting --config config/eightpm_backtest.json --verbosity 3
   ```

2. **æ£€æŸ¥ç­–ç•¥è¯­æ³•**
   ```bash
   freqtrade test-pairlist --config config/eightpm_backtest.json
   ```

3. **éªŒè¯æ•°æ®**
   ```bash
   freqtrade list-data --config config/eightpm_backtest.json
   ```

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### å‚æ•°è°ƒä¼˜æµç¨‹

1. **ä½¿ç”¨ç‹¬ç«‹æµ‹è¯•å¿«é€ŸéªŒè¯**
   ```bash
   python scripts/local/test_strategy.py
   ```

2. **ä¿®æ”¹å‚æ•°å¹¶é‡æ–°æµ‹è¯•**
   - ç¼–è¾‘ `scripts/local/final_optimized_strategy.py`
   - è°ƒæ•´æ­¢æŸæ­¢ç›ˆæ¯”ä¾‹
   - ä¿®æ”¹è¿‡æ»¤æ¡ä»¶

3. **freqtradeç¯å¢ƒéªŒè¯**
   ```bash
   ./scripts/local/run_local_backtest.sh
   ```

4. **å¤šå¸‚åœºéªŒè¯**
   ```bash
   # æµ‹è¯•ä¸åŒäº¤æ˜“å¯¹
   ./scripts/local/run_local_backtest.sh 20240101-20241231 "BTC/USDT" 365
   ./scripts/local/run_local_backtest.sh 20240101-20241231 "SOL/USDT" 365
   ```

### ç­–ç•¥æ”¹è¿›æ–¹å‘

1. **æ—¶é—´è¿‡æ»¤**: æ·»åŠ ç‰¹å®šæ—¶é—´æ®µè¿‡æ»¤
2. **å¸‚åœºçŠ¶æ€**: æ ¹æ®æ³¢åŠ¨ç‡è°ƒæ•´å‚æ•°
3. **å¤šæ—¶é—´æ¡†æ¶**: ç»“åˆæ›´é«˜æ—¶é—´æ¡†æ¶ç¡®è®¤
4. **åŠ¨æ€å‚æ•°**: æ ¹æ®å¸‚åœºæ¡ä»¶åŠ¨æ€è°ƒæ•´

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ä¸»READMEæˆ–æäº¤Issueã€‚